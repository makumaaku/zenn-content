---
title: "äºŒé‡ã‚¿ãƒƒãƒ—ã‚’é¿ã‘ã‚‹ãŸã‚ã®ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®ä½œæˆ" # è¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«
emoji: "ğŸ£" # ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒã¨ã—ã¦ä½¿ã‚ã‚Œã‚‹çµµæ–‡å­—ï¼ˆ1æ–‡å­—ã ã‘ï¼‰
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢è¨˜äº‹
topics: ["Flutter","Dart","tool"] # ã‚¿ã‚°ã€‚["markdown", "rust", "aws"]ã®ã‚ˆã†ã«æŒ‡å®šã™ã‚‹
published: true # å…¬é–‹è¨­å®šï¼ˆfalseã«ã™ã‚‹ã¨ä¸‹æ›¸ãï¼‰
---


## ã¯ã˜ã‚ã«
éåŒæœŸã§
- Firestoreã¸ã®æ›¸ãè¾¼ã¿
- APIã‹ã‚‰å€¤ã‚’å–å¾—ã™ã‚‹
ãªã©ã®ã‚±ãƒ¼ã‚¹ã§ã€ã‚ˆããƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚
ã‚ˆããƒœã‚¿ãƒ³é€£æ‰“ã—ã¦ã—ã¾ã„ã¾ã™ã‹ã‚‰ã­..
â€‹
ã“ã¡ã‚‰ã‚‚ã‚³ãƒ”ãƒšç”¨ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ãƒ¡ãƒ¢ã—ã¦ãŠãã¾ã™ã€‚
â€‹
ãã‚“ãªãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã‚’å›é¿ã™ã‚‹ãŸã‚ã®ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦æ®‹ã—ã¦ãŠã“ã†ã‹ãªã¨ã€‚
`showDialog`ã®ä¸­ã§`CircularProgressIndicator`ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
â€‹
![ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ€ã‚¤ã‚¢ãƒ­ã‚°](https://storage.googleapis.com/zenn-user-upload/02b781476f2c-20211127.png)
â€‹
## ä½¿ã„æ–¹
éåŒæœŸã®å‡¦ç†ã‚’`showLoadingDialog`ã¨`hideLoadingDialog`ã§ã¯ã•ã‚€ã€‚
â€‹
```dart
await showLoadingDialog(context,timeoutSec:10);
await updateDB();
hideLoadingDialog();
```
â€‹
â€‹
## ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®ã‚³ãƒ¼ãƒ‰å…¨æ–‡
```dart:loading_dialog.dart 
import 'dart:async';
import 'package:flutter/material.dart';
â€‹
BuildContext? _loadingDialogContext;
â€‹
Future<void> showLoadingDialog(BuildContext context,
    {int durationTime = 500}) async {
  if (_loadingDialogContext != null) {
    return;
  }
â€‹
 //awaitã¯ä»˜ã‘ãªã„
  showDialog(
      context: context,
      barrierDismissible: false,
      builder: (context) {
        _loadingDialogContext = context;
        return Center(
          child: ConstrainedBox(
            constraints: const BoxConstraints.expand(width: 50, height: 50),
            child: const CircularProgressIndicator(
                valueColor:
                    AlwaysStoppedAnimation<Color>(Colors.blue)),
          ),
        );
      });
  await Future.delayed(Duration(milliseconds: durationTime));
  return;
}
â€‹
Future<void> hideLoadingDialog() async {
  final _context = _loadingDialogContext;
  if (_context != null) {
    Navigator.of(_context).pop();
    _loadingDialogContext = null;
  }
}
â€‹
â€‹
â€‹
```
çµæ§‹ã©ã“ã§ã‚‚ä½¿ãˆã‚‹ã¨æ€ã†ã®ã§ã€æŒã£ã¦ãŠãã¨ä¾¿åˆ©ãªã¯ãšã§ã™ï¼
ã‚‚ã£ã¨è‰¯ã„æ›¸ãæ–¹ãƒ»ä½¿ã„æ–¹ã‚ã‚Œã°ã€ã‚³ãƒ¡ãƒ³ãƒˆé ‚ã‘ãŸã‚‰å¬‰ã—ã„ã§ã™ã€‚